<!doctype html>
<html lang="en" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Explore Portugal Experience</title>

  <meta name="description" content="Explore Portugal Experience — Premium private tours & transfers." />

  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
  <link rel="icon" href="/assets/icons/apple-touch-icon.png">

  <!-- cache bust -->
  <link rel="stylesheet" href="/assets/css/style.css?v=1001" />
</head>

<body class="home">

  <!-- HEADER (inject nav.js like FAQ) -->
  <div id="siteHeader"></div>

  <main class="page">

    <!-- WHY US -->
    <section class="section">
      <div class="wrap">
        <div class="panel">
          <h1 class="h1">Why choose Explore Portugal Experience</h1>
          <p class="p">
            Because travellers deserve calm, clarity and respect for their time. Every journey is prepared
            with genuine attention to people — not just kilometres.
          </p>

          <div class="grid-3" style="margin-top:14px;">
            <div class="card">
              <div class="label">Rating</div>
              <p class="p" style="margin-top:6px;">★★★★★</p>
              <p class="p">Private premium service mindset.</p>
            </div>

            <div class="card">
              <div class="label">Clarity</div>
              <p class="p" style="margin-top:6px;">No surprises.</p>
              <p class="p">Price and plan confirmed in writing before the day.</p>
            </div>

            <div class="card">
              <div class="label">Pace</div>
              <p class="p" style="margin-top:6px;">Your rhythm.</p>
              <p class="p">Quiet or chatty — we adapt with discretion.</p>
            </div>
          </div>

          <div class="actions" style="margin-top:16px;">
            <a class="btn btn-gold" href="/booking.html">Book / Request a quote</a>
            <a class="btn btn-ghost" href="https://www.instagram.com/exploreportugal2025" target="_blank" rel="noopener">See Instagram</a>
          </div>

          <p class="micro" style="margin-top:12px;">
            VIP response time • Professional drivers • Premium vehicles • Discreet service
          </p>
        </div>
      </div>
    </section>

    <!-- TESTIMONIALS (static examples) -->
    <section class="section">
      <div class="wrap">
        <h2 class="h2">What our clients say</h2>
        <p class="p">
          A few comments from travellers who trusted Explore Portugal Experience for transfers and full-day private tours.
        </p>

        <div class="grid-3" style="margin-top:12px;">
          <article class="card">
            <div class="label">Marta &amp; João · Lisbon</div>
            <p class="p" style="margin-top:8px;">★★★★★</p>
            <p class="p">
              “We arrived exhausted after a long flight and the moment we saw our name on the sign,
              we immediately felt at home. Calm, unhurried, crystal-clear communication and genuine care.”
            </p>
          </article>

          <article class="card">
            <div class="label">Sarah &amp; David · UK</div>
            <p class="p" style="margin-top:8px;">★★★★★</p>
            <p class="p">
              “We booked two days between Lisbon, Sintra and Cascais. Professional, discreet and incredibly kind.
              Premium without stress.”
            </p>
          </article>

          <article class="card">
            <div class="label">Ana · Corporate guest</div>
            <p class="p" style="margin-top:8px;">★★★★★</p>
            <p class="p">
              “Tight schedule, multiple meetings and flights on the same day. Everything ran with rare serenity.
              Always with alternatives when needed.”
            </p>
          </article>
        </div>
      </div>
    </section>

    <!-- LEAVE A REVIEW (local save for now; ready to connect later) -->
    <section class="section" id="leave-review">
      <div class="wrap">
        <div class="panel">
          <h2 class="h2">Leave a review</h2>
          <p class="p">
            Short is perfect. Your feedback helps Explore Portugal Experience grow — discreetly.
          </p>

          <div class="grid-3" style="margin-top:12px;">
            <!-- FORM -->
            <div class="card" style="grid-column: span 2;">
              <div class="label">Your review</div>

              <div class="epe-stars" style="margin-top:10px;">
                <button type="button" class="epe-star" data-star="1" aria-label="1 star">★</button>
                <button type="button" class="epe-star" data-star="2" aria-label="2 stars">★</button>
                <button type="button" class="epe-star" data-star="3" aria-label="3 stars">★</button>
                <button type="button" class="epe-star" data-star="4" aria-label="4 stars">★</button>
                <button type="button" class="epe-star" data-star="5" aria-label="5 stars">★</button>
                <span class="micro" id="epeRatingText" style="margin-left:8px;">Select a rating</span>
              </div>

              <div class="grid-3" style="margin-top:12px;">
                <div class="field">
                  <label class="label" for="epeReviewName">Name (optional)</label>
                  <input id="epeReviewName" class="epe-input" type="text" maxlength="40" placeholder="Your name">
                </div>

                <div class="field" style="grid-column: span 2;">
                  <label class="label" for="epeReviewText">Review</label>
                  <textarea id="epeReviewText" class="epe-input" rows="5" maxlength="800" placeholder="What did you like most?"></textarea>
                  <div class="micro" id="epeCharHint" style="margin-top:6px;">0 / 800</div>
                </div>
              </div>

              <div class="actions" style="margin-top:14px;">
                <button class="btn btn-gold" type="button" id="epeSaveBtn">Save review</button>
                <button class="btn btn-ghost" type="button" id="epeCopyBtn">Copy text</button>
                <a class="btn btn-ghost" href="https://g.page/r/CUhLGcsClbSWEBM/review" target="_blank" rel="noopener">Open Google Reviews</a>
              </div>

              <p class="micro" id="epeStatus" style="margin-top:10px;"></p>

              <div class="card" id="epeSavedBox" style="display:none; margin-top:12px;">
                <div class="label">Saved on this device</div>
                <p class="p" id="epeSavedText" style="margin-top:8px; white-space:pre-wrap;"></p>
                <p class="micro">
                  Next step: I connect this to your hosting so reviews become public for everyone.
                </p>
              </div>
            </div>

            <!-- SIDE -->
            <div class="card">
              <div class="label">Tip</div>
              <p class="p" style="margin-top:8px;">
                Prefer Google? Click “Open Google Reviews”. You can also copy your text and paste it there.
              </p>
              <p class="p" style="margin-top:8px;">
                Thank you for supporting a calm, premium experience.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <button class="to-top" type="button" aria-label="Back to top">↑</button>
  </main>

  <!-- FOOTER (inject nav.js like FAQ) -->
  <div id="siteFooter"></div>

  <!-- cache bust -->
  <script defer src="/assets/js/nav.js?v=1001"></script>

  <script>
    (function () {
      const btn = document.querySelector('.to-top');
      if (!btn) return;
      const toggle = () => btn.classList.toggle('show', window.scrollY > 500);
      window.addEventListener('scroll', toggle, { passive: true });
      toggle();
      btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();
  </script>

  <!-- Review JS (local save only for now) -->
  <script>
    (function () {
      const STORAGE_KEY = 'epe_reviews_pending_v1';

      const starBtns = Array.from(document.querySelectorAll('.epe-star'));
      const ratingText = document.getElementById('epeRatingText');
      const nameEl = document.getElementById('epeReviewName');
      const textEl = document.getElementById('epeReviewText');
      const charHint = document.getElementById('epeCharHint');

      const saveBtn = document.getElementById('epeSaveBtn');
      const copyBtn = document.getElementById('epeCopyBtn');
      const statusEl = document.getElementById('epeStatus');

      const savedBox = document.getElementById('epeSavedBox');
      const savedText = document.getElementById('epeSavedText');

      let rating = 0;

      function setStatus(msg){ statusEl.textContent = msg || ''; }

      function setRating(n){
        rating = n;
        starBtns.forEach(btn => {
          const s = parseInt(btn.getAttribute('data-star'), 10);
          btn.classList.toggle('is-on', s <= rating);
        });
        ratingText.textContent = rating ? (rating + ' / 5') : 'Select a rating';
      }

      function updateChars(){
        const len = (textEl.value || '').length;
        if (charHint) charHint.textContent = len + ' / 800';
      }

      function safeText(s, max){
        const t = String(s || '').trim();
        if (!t) return '';
        return t.length > max ? t.slice(0, max) + '…' : t;
      }

      function getStored(){
        try{
          const raw = localStorage.getItem(STORAGE_KEY);
          const arr = raw ? JSON.parse(raw) : [];
          return Array.isArray(arr) ? arr : [];
        }catch{
          return [];
        }
      }

      function storeReview(r){
        const arr = getStored();
        arr.push(r);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
      }

      function starsString(n){
        const r = Math.max(0, Math.min(5, n|0));
        return '★'.repeat(r) + '☆'.repeat(5-r);
      }

      function formatReview(r){
        const lines = [
          'Review — Explore Portugal Experience',
          '------------------------------',
          'Rating: ' + starsString(r.rating) + ' (' + r.rating + '/5)',
          'Name: ' + (r.name ? r.name : 'Anonymous'),
          '',
          r.message,
          '',
          'Saved: ' + new Date(r.createdAt).toLocaleString()
        ];
        return lines.join('\n');
      }

      async function copyToClipboard(text){
        try{
          await navigator.clipboard.writeText(text);
          return true;
        }catch{
          const ta = document.createElement('textarea');
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          const ok = document.execCommand('copy');
          ta.remove();
          return ok;
        }
      }

      // Bind stars
      starBtns.forEach(btn => {
        btn.addEventListener('click', () => setRating(parseInt(btn.getAttribute('data-star'), 10)));
      });

      if (textEl) textEl.addEventListener('input', updateChars);
      updateChars();

      // Save
      if (saveBtn) {
        saveBtn.addEventListener('click', () => {
          setStatus('');

          const name = safeText(nameEl.value, 40);
          const message = safeText(textEl.value, 800);

          if (!rating){
            setStatus('Please select a rating.');
            return;
          }
          if (!message){
            setStatus('Please write a short review.');
            return;
          }

          const review = {
            id: (crypto && crypto.randomUUID) ? crypto.randomUUID() : (Date.now() + '_' + Math.random().toString(16).slice(2)),
            createdAt: new Date().toISOString(),
            name: name,
            rating: rating,
            message: message
          };

          storeReview(review);

          if (savedText) savedText.textContent = formatReview(review);
          if (savedBox) savedBox.style.display = '';

          nameEl.value = '';
          textEl.value = '';
          updateChars();
          setRating(0);

          setStatus('Saved on this device ✅');
        });
      }

      // Copy
      if (copyBtn) {
        copyBtn.addEventListener('click', async () => {
          setStatus('');
          const last = getStored().slice(-1)[0];
          if (!last){
            setStatus('Save a review first.');
            return;
          }
          const ok = await copyToClipboard(formatReview(last));
          setStatus(ok ? 'Copied ✅' : 'Could not copy.');
        });
      }
    })();
  </script>

  <!-- Scoped CSS for the review inputs (does not touch global layout) -->
  <style>
    .epe-stars{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
    .epe-star{
      width:40px;height:40px;border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      cursor:pointer;
      display:grid;place-items:center;
      font-size:18px;color:rgba(255,255,255,.62);
      transition:transform .08s ease, border-color .15s ease, background .15s ease;
    }
    .epe-star:hover{transform:translateY(-1px);border-color:rgba(212,175,55,.40);background:rgba(212,175,55,.08)}
    .epe-star.is-on{color:rgba(212,175,55,.95);border-color:rgba(212,175,55,.55);background:rgba(212,175,55,.12)}
    .epe-input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:rgba(255,255,255,.92);
      outline:none;
      font: inherit;
      box-sizing: border-box;
    }
    .epe-input:focus{
      border-color:rgba(212,175,55,.42);
      box-shadow:0 0 0 6px rgba(212,175,55,.10);
    }
  </style>
</body>
</html>
